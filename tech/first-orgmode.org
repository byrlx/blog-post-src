---
layout: post
title: 初次接触OrgMode
category: [OrgMode]
tag: [orgmode]
---

{{page.title}}
=======================

很久很久以前...

1. 接触linux之后，在写代码的两大神器之间，我选择了vim。这样一用就是几年，
   从最初的用鼠标操作，到后来学会了简单或复杂的快捷操作。刀法日渐犀利，
   心法也正在慢慢成型。但是，跟所有习武者一样，日子久了，难免有些审美疲劳，
   总想接触点新东西...有一次，请一个同事帮忙解bug，看他用在emacs里十分娴熟
   的使用gdb看代码，突然就被这另一神器勾的有些心动，试着用了几次，由于工作较忙，
   从新开始学一门新刀法势必会影响日常工作写代码的效率，所以没有坚持下去。

2. 下半年开始，用了不少日程管理的APP。any.com的出品的[Any.do](http://www.any.do/)
   [Cal](www.any.do)是两款非常简洁漂亮的应用，用起来特别舒服。因为Cal能与谷歌日历
   同步，所以用了很长时间。后来谷歌keep出来后，开始觉得用手机记点笔记也是不错的习惯，
   就一直在用，但是因为在公司google drive一直被墙，所以有点不爽，就转到用evernote
   一段时间，evernote在做笔记方面要比keep要好，尤其是标签功能。但是，所有这些tool
   的一个缺点都是PC端的同步比较不习惯。对于我这样的一个vimer来说，有个应用对应的vim
   插件是最好不过的事情。

后来，无意中看到了一篇介绍emacs的org mode的文章。看完后，我隐隐觉得，这就是我要的
“PC+手机+谷歌日历”的日程管理工具。而且，最终要的是，我终于找到了转投emacs怀抱的理由！

#### 1. 我怎麽用org mode？

"每天早上，到了公司，打开emacs。接着整体浏览未读邮件，然后整理今天要做的工作，
通过org mode记录下来。做完一个就进入emacs将状态改为‘DONE’。
下班前，整体审视一下今天的工作完成情况。"

![orgmode task]({{root_url}}/public/img/orgmode2.png "orgmode2")

虽然没怎么用过emacs，但作为一个vimer，我也看过诸如“vim VS emacs”这种上古神器对决的文章，
所以大概了解emacser都有一个类似于“everything in emacs”的习惯，就是任何事情都在emacs里完成。 				    
所以他们的emacs一直都是开着的。正因如此，如果能使用emacs管理日程，那再好不过了。
org mode正是为此而生的。

我在三个点使用org mode：公司，家，手机（means everywhere）。这三个点通过dropbox作为同步工具。
具体的使用环境是这样：公司和家是PC，使用emacs的org mode模式，org mode的目录存放在dropbox
的目录下面，这样就可以实现公司和家的同步。手机则使用org mode的android客户端
[MobileOrg](https://github.com/matburt/mobileorg-android/wiki)，通过dropbox账户登录。
手机和PC的同步是这样的：PC做完修改后，通过org-mobile-push命令推送到dropbox里手机org的目录，
MobileOrg通过同步按钮同步。而手机修改完后，也可以通过同步按钮上传到dropbox，PC端则使用
org-mobile-pull命令同步手机的修改。这样就可以实现“公司+家+erverywhere”的同步了。

org mode对我来说主要有以下用途：1，日常生活管理，记录最近及将来要做的事情。2，工作管理，
记录每天要完成的工作，以及长期需要完成的工作。3，项目管理，记录项目进度及完成情况。
4，灵感管理，随时记下一些灵光一闪的想法，以免失去成就伟大的机会。^_^

#### 2. org mode安装管理使用

org mode其实无需安装，最新的emacs版本已经默认包含了org mode这个功能。当然如果想用最新的
版本可以去org mode的[官网](orgmode.org)下载，然后在emacs配置文件中使用load命令加载最新版本。

	      (setq load-path (cons "~/code/org-8.2.5c/lisp" load-path))

如果文件后缀为“.org”，则用emacs打开该类文件时，会自动进入org mode模式。更具体完整的org mode配置
可以参考官网及[这篇](http://helloxxxxxx.blog.163.com/blog/static/216015095201352772820142/)和
[这篇](http://www.cnblogs.com/holbrook/archive/2012/04/14/2447754.html#sec-7)文章，
这里主要说一下我的使用习惯。

前面已经提过我使用org mode所做的几种管理行为（日常生活、工作、项目、灵感）。虽然分为四类，
但是日常生活管理和工作管理都作为标题式管理可以写到一个文件“task.org”（所以标题式管理，
是指每个task的内容很少，使用一个标题就可以表达task内容），然后在文件内部通过“标签”进行分类。
项目管理和灵感（及读书笔记等）管理则分别使用“proj.org”和“note.org”两个文件。
做好分类，是实现良好任务管理的第一步。

上文已经做好分类，下面接着说具体的操作场景。比如我正在emacs里写代码，突然跑过来一个任务，
需要存入task.org，要怎么办？一种可行的操作过程是：存档当前文件，打开task.org，将任务写入，
关掉task.org，打开之前的文件。

是不是觉得有些繁琐？打开-关闭-打开是一个有点费时的过程，有时候你甚至需要想一下你的org文件的位置。
作为一个上古神器上的“锋利”插件，org mode有一套完整的命令来简化这个过程。通过使用快捷键和配置文件，
可以在不打开相关org文件的前提下将内容写入。下面是这个过程的配置文件内容。

	(define-key global-map [f12] 'org-capture)
	(setq org-capture-templates 
	'(("t" "Todo" entry (file+regexp "~/lx-git/orgGTD/local/task.org" "Tasks *")
         "* TODO %? %T\n %i\n " )
	  ("c" "Calendar" entry (file+datetree+prompt "~/lx-git/orgGTD/local/task.org" )
         "* TODO %?\n %i\n " )
	  ("i" "Idea" entry (file+regexp "~/lx-git/orgGTD/local/note.org" "Ideas *")
         "* %? %T\n %i\n " )
	  ("n" "Note" entry (file "~/lx-git/orgGTD/local/note.org" )
         "* %? %T\n %i\n " )
	  ("p" "Project" entry (file "~/lx-git/orgGTD/local/project.org" )
         "* %?\n %i %T\n " )
	 ))

第一行代码是设置org mode的快捷键，在emacs中按此键会默认生成一个新窗口，调出org mode的快捷键界面。
新窗口中列出了我们在org mode模式下可以使用的快捷键。快捷键则是后面的代码定义的，
代码的每一行定义了不同的快捷键对应的操作。
具体的快捷键配置可以参考org mode的[官方文档](http://orgmode.org/manual/Template-elements.html#Template-elements)。


以上面的代码为例说一下实际使用场景：假设我正在写这篇文章，突然有了一个其他的想法，
但又不想中断现在的工作，则按F12会在下方出现一个新窗口，弹出目前org mode支持的快捷键，
再按i会进入编辑模式，记录完成后，按“ctrl+c ctrl+c”两次就会自动把编辑内容存入note.org
文件,然后我们可以继续做原来的工作,需要提的是,整个过程note.org文件都没有出现过，org mode会根据
上面的配置自动将我们编辑的内容存到note.org文件的“Ideas”关键字下面。

#### 3. org mode的标题式管理

org mode使用标题来管理每一个task项，每个标题的状态可以分为“TODO”，“NEXT”，“DONE”（也支持自定义状态），
标题可以包含任意层次和数量的子标题。

对于我来说，一般分为两种方式对日程/工作进行管理：日期明确和不明确的。对于日期明确的任务，使用了org
mode的Calendar功能（即上面定义的c快捷键）;而日期不明确的任务，统一放到“Tasks”一级标题下面
（即上面定义的t快捷键）。具体如下图所示：

![orgmode task]({{root_url}}/public/img/orgmode.png "orgmode")

这样就可以对自己每日的工作完成情况及中长期的任务有一个直观的印象，有利于合理安排时间，提供工作效率。
