#+OPTIONS: toc:t H:3
#+AUTHOR: Zhengchao Xu
#+EMAIL: xuzhengchaojob@gmail.com
#+SETUPFILE: macros.setupfile

#+TITLE: 打造Emacs编程环境
* Elisp开发环境
** 使用[[paredit]]写代码
** 运行代码
1. 在*scratch*里可以使用 "C-x C-e"运行表达式.
2. 使用 "C-M-x" 运行函数.
2. 可以在buffer中使用eval-buffer使当前代码生效, 然后在eshell或ielm中调用.
** 调试代码
*** Edebug
Edebug是Emacs自带的代码级的调试器. 可以在想要调试的代码上使用
"C-u C-M-x", 就会进入调试模式, 此时运行程序, 就会在函数头停留.

使用快捷键n可以一步一步的调试. 
* Clojure开发环境
** 安装相关包
1. cider. Cider是clojure的emacs开发环境, 通过包管理工具安装cider.
2. clojure-mode. 
3. ac-cider. Clojure mode的自动补全插件.
4. Leiningen.  非Emacs插件, shell程序.
5. projectile
** emacs配置
1. 在clojure mode下使用paredit.
   #+BEGIN_EXAMPLE
   (add-hook 'clojure-mode-hook 'paredit-mode)
   #+END_EXAMPLE
2. 配置lein, 使用cider, 在.lein/profiles.clj中加入如下
   #+BEGIN_EXAMPLE
   {:repl {:plugins [[cider/cider-nrepl "0.10.1"]]}}
   #+END_EXAMPLE
** 示例程序
*** 使用lein new name命令创建一个名称为name的工程.
*** 在emacs中运行 cider-jack-in进入nREPL
* paredit
该插件用于括号/引号的自动补全.
如果担心evil mode破坏括号的完整, 编写时先暂停掉evil mode 
** 常用函数/快捷键
| 快捷键        | 函数         | 功能          |
|---------------+--------------+---------------|
|               | <12>         | <12>          |
| (             | paredit-open-round | 生成对括号    |
| [             | paredit-open-sqaure | 生成中括号对  |
| {             | paredit-open-curly | 生成大括号对  |
| )/]/}         | paredit-close-[round/squre/curly] | 跳转到对应的结尾 |
| "             | paredit-doublequote | 生成双引号对  |
| M-(           | paredit-wrap-round | 将当前内容括起来 |
| M-"           | paredit-meta-doublequote | 将当前内容用引号括起来 |
| C-d           |              | 删除后面一个字符 |
| M-d           |              | 删除后面的word |
| DEL           |              | 删除前面的字符 |
| M-DEL         |              | 删除前面的word |
| C-k           |              | 删除到结尾    |
| C-)           |              | 把当前右括号尾部的内容放到括号内 |
| C-(           |              | 把当前左括号尾部的内容放入括号 |
| C-}/{         |              | 把当前左右括号的内容挤出括号 |
| C-M-f/b       |              | 跳跃式前进/后退 |
| C-M-d/p       |              | 降级前进/后退 |
| C-M-u/n       |              | 升级前进/后退 |
| M-<up>/<down> |              | 升级/降级括号 |
| M-s           |              | 去除引号      |
| M-S/J         |              | 分割/合并   |
|               |              |               |
